angular.module("doneChartsSet",["googlechart"]).directive("bindHtmlCompile",["$compile",function(e){return{restrict:"A",link:function(t,a,o){t.$watch(function(){return t.$eval(o.bindHtmlCompile)},function(r){a.html(r&&r.toString());var n=t;o.bindHtmlScope&&(n=t.$eval(o.bindHtmlScope)),e(a.contents())(n)})}}}]).directive("doneChartx",function(){return{restrict:"EA",scope:{data:"=",options:"=",onChartReady:"&",cssStyle:"=",chartType:"="},templateUrl:"/done/components/tmplts/doneChart.html",controller:function(e,t,a){void 0===e.cssStyle&&(e.cssStyle="height:600px; width:100%;");var o={};o.type=e.chartType,o.displayed=!1,o.data=e.data,o.options=e.options,o.formatters={},e.chart=o,e.chartReady=function(){$(".google-visualization-table-table img[width]").each(function(e,t){$(t).css("width",$(t).attr("width")).css("height",$(t).attr("height"))}),e.onChartReady&&e.onChartReady()}}}}).directive("doneGauageChartx",function(){return{restrict:"EA",scope:{data:"=",options:"=",onChartReady:"&"},templateUrl:"/done/components/tmplts/doneChart.html",controller:function(e,t,a){void 0===e.cssStyle&&(e.cssStyle="height:600px; width:100%;");var o={type:"Gauge",displayed:!1};o.data=e.data,void 0===e.options?o.options={width:400,height:120,redFrom:90,redTo:100,yellowFrom:75,yellowTo:90,minorTicks:5}:o.options=e.options,e.chart=o,e.chartReady=function(){e.onChartReady&&e.onChartReady()}}}}).directive("doneOrgChartx",function(){return{restrict:"EA",scope:{data:"=",options:"=",onChartReady:"&"},templateUrl:"/done/components/tmplts/doneChart.html",controller:function(e,t,a){void 0===e.cssStyle&&(e.cssStyle="height:600px; width:100%;");var o={type:"OrgChart",displayed:!1};o.data=e.data,void 0===e.options?o.options={allowHtml:!0}:o.options=e.options,e.chart=o,e.chartReady=function(){e.onChartReady&&e.onChartReady()}}}}),angular.module("doneComponentsSet",[]).directive("doneTable",function(e,t,a,o,r,n,l,s,i){return{restrict:"E",scope:{md:"=colMd",tableContext:"=tableContext"},templateUrl:"./tmplts/doneTable.html",controller:function(l,c,u){let d=l.md,m=l.tableContext;if(l.tableContext.getRows=function(){return l._dtableData||(l._dtableData=[]),l._dtableData},!d||!m)return void o.showError("Setup Error","Missing one of the value [md, tableContext] !");if(!d.columns)return void o.showError("Setup Error","Please configure columns in table metadata");l._columns=d.columns;let p=d.limit;l._searchcolumns=[];for(let e=0;e<l._columns.length;e++)"Y"===l._columns[e].sortable?l._columns[e].sort=!0:l._columns[e].sort=!1,l._columns[e].template&&(l._columns[e].template=n.trustAsHtml(l._columns[e].template)),"Y"!==l._columns[e].enableSearch||l._columns[e].enableCondition&&"Y"!==l._columns[e].enableCondition||l._searchcolumns.push(l._columns[e]);l.searchParams={};let g="";for(let e=0;e<l._searchcolumns.length;e++){let t=l._searchcolumns[e];0!==e&&e%2==0&&(g+="</div>"),e%2==0&&(g+='<div class="form-group">'),g+='<label class="col-lg-2 control-label"> '+t.label+"</label>",g+='<div class="col-lg-4">',t.type&&"combostore"===angular.lowercase(t.type)?(g+=' <done-select ng-model="searchParams.'+t.attributeName+'" ',t.simplecombovals?(g+=' simple-combo = "Y" ',g+=' values = "'+t.simplecombovals+'" '):(g+=' custom-object="'+t.customobject+'" ',g+=' key-attribute="'+t.keyattribute+'" ',g+=' label-attribute="'+t.labelattribute+'"',t.whereclause&&(g+=' where-clause="'+t.whereclause+'"'),t.orderby&&(g+=' order-by="'+t.orderby+'"'),t.params&&(g+=' params ="'+t.params+'"')),g+="></done-select> "):t.type&&"multicombostore"===angular.lowercase(t.type)?(g+=' <done-multi-select ng-model="searchParams.'+t.attributeName+'" ',g+=' custom-object="'+t.customobject+'" ',g+=' key-attribute="'+t.keyattribute+'" ',g+=' label-attribute="'+t.labelattribute+'"',t.whereclause&&(g+=' where-clause="'+t.whereclause+'"'),t.orderby&&(g+=' order-by="'+t.orderby+'"'),t.params&&(g+=' params ="'+t.params+'"'),g+="></done-multi-select> "):t.type&&"checkbox"===angular.lowercase(t.type)?(g+='<div class="checkbox">',g+=" <label>",g+=' <input type="checkbox" ng-true-value="\'Y\'" ng-false-value="\'N\'" ng-model="searchParams.'+t.attributeName,"Y"!==_formMetaData.isReadOnly&&"Y"!==t.isReadOnly||(g+="disabled"),g+='"> ',g+=' <span class="cr"><i class="cr-icon glyphicon glyphicon-ok"></i></span>',g+="</label>",g+="</div>"):t.type&&"date"===angular.lowercase(t.type)?(g+='<div class="input-group date">',g+=' <input ng-model="searchParams.'+t.attributeName+'" type="datetime" class="form-control" ',g+=' date-time=""  min-view="date" auto-close="true" format="dd/MM/yyyy"> ',g+=' <span class="input-group-addon"><i class="fa fa-calendar"></i></span> ',g+=" </div>"):(g+=' <input placeholder="'+t.label+'" class="form-control"',g+=' ng-model="searchParams.'+t.attributeName+'" type="text">'),g+="</div>",e===l._searchcolumns.length-1&&(g+="</div>")}l.searchHtml=g,l.pagenate={},l.pagenate.limit=10,p&&(l.pagenate.limit=p),l.pagenate.offset=0,l.pagenate.currentPage=1;let f=function(e,t,a,o,n,s,i,c){l.isLoading=!0;let u=function(e){l.isLoading=!1,a?(l.pagenate.totalPages=e.cnt,l._dtableData=e.data):l._dtableData=e,l._dtableData.forEach((e,t)=>{e.rowId=l.pagenate.currentPage+"_"+t,l.tableContext._dirtyData.forEach(t=>{t.rowId===e.rowId&&(e.is_selected="Y")})}),l.pagenate.offset+=l.pagenate.limit,d.onQueryCallback&&d.onQueryCallback(l._dtableData)};c&&(u=c);let m=d.orderBy;if(s&&(m=s),d.qid&&d.qcolumn){if(o&&o.length>0?o+=" AND ":(o="",n=[]),d.qcolumn.indexOf(",")>-1){let e=d.qcolumn.split(",");for(let t=0;t<e.length;t++)o+=e[t]+" = ? ",t<e.length-1&&(o+=" AND ")}else o+=d.qcolumn+" = ? ";if(angular.isArray(d.qid))for(let e=0;e<d.qid.length;e++)n.push(d.qid[e]);else n.push(d.qid)}let p,g=d.customObject;i&&(g="DeExportExcelEngine",p=d.exportDS?d.exportDS:d.customObject),r.queryResultWithCallback(g,"_NOCACHE_",o,n,m,u,t,e,a,i,p)};if("Y"===d.isExport){m.export=function(){f(0,l.pagenate.limit,"Y",l.wc,l.wcParams,l.orderBy,"N",function(e){if(l.isLoading=!1,e){console.log(e);let t=_appUrl+"/exports/"+i.loggedInUser().sessionId+".xls";window.open(t,"Download")}})},d.headerItems||(d.headerItems=[]);let e={isTemplate:"Y",template:"<a class='btn btn-success btn-sm' ng-click='tableContext.export()'><i class='fa fa-export'></i> Export</a>"};d.headerItems.push(e)}d.stopQuery&&"Y"!==!d.stopQuery||f(l.pagenate.offset,l.pagenate.limit,"Y",l.wC,l.wCParams),l.sort=function(e){let t;e.sort?(e.sort=!1,t=e.attributeName+" DESC"):(e.sort=!0,t=e.attributeName+" ASC"),l.pagenate.offset=0,l.pagenate.currentPage=1,f(l.pagenate.offset,l.pagenate.limit,"Y",l.wC,l.wCParams,t)},l.tableContext._dirtyData=[],l.tableContext.getUnSavedDataChanges=function(){return l.tableContext._dirtyData},l.tableContext.getUnSavedChanges=function(){let e=[];if(l._dtableData&&l._dtableData.length)for(let t=0;t<l._dtableData.length;t++){let a=l._dtableData[t];a&&"Y"===a.is_selected&&e.push(a)}return e},l.gotoPage=function(e){l.pagenate.currentPage=e,l.pagenate.offset=1==e?0:e*l.pagenate.limit-l.pagenate.limit;f(l.pagenate.offset,l.pagenate.limit,void 0,l.wc,l.wcParams)},l.tableContext.refresh=function(){f(0,l.pagenate.limit,"Y",l.wC,l.wCParams)},l.search=function(){l.wc="",l.wcParams=[],l.tableContext._dirtyData=[];for(let e=0;e<d.columns.length;e++)if("Y"===d.columns[e].enableSearch){let t=d.columns[e].attributeName,a="";if("multicombostore"==d.columns[e].type?(a=l.searchParams[d.columns[e].attributeName])&&(a=a[d.columns[e].keyattribute]):a=l.searchParams[t],a)if(l.wcParams.length>=1&&(l.wc+=" AND "),"date"==d.columns[e].type){d.columns[e].operator?("lte"===d.columns[e].operator&&(l.wc+=d.columns[e].attributeName+" <=  ? "),"lt"===d.columns[e].operator&&(l.wc+=d.columns[e].attributeName+" <  ? "),"gt"===d.columns[e].operator&&(l.wc+=d.columns[e].attributeName+" >  ? "),"gte"===d.columns[e].operator&&(l.wc+=d.columns[e].attributeName+" >=  ? "),"eq"===d.columns[e].operator&&(l.wc+=" DATE_FORMAT("+d.columns[e].attributeName+",'%d-%m-%Y') =  DATE_FORMAT(?,'%d-%m-%Y') ")):l.wc+=d.columns[e].attributeName+" >=  ? ";let t=s.convertDBDate(l.searchParams[d.columns[e].attributeName]);l.wcParams.push(t)}else l.wc+=" lower("+d.columns[e].attributeName+") like lower(?)",l.wcParams.push("%"+a+"%")}l.pagenate.offset=0,l.pagenate.limit=10,p&&(l.pagenate.limit=p),f(l.pagenate.offset,l.pagenate.limit,"Y",l.wc,l.wcParams)},l.clear=function(){l.searchParams=[],delete l.wc,delete l.wcParams,l.pagenate.currentPage=1,l.pagenate.offset=0,l.pagenate.limit=10,p&&(l.pagenate.limit=p),f(l.pagenate.offset,l.pagenate.limit,"Y")};l.bulkAttachRow={},l.bulkUploader=new function(){let e,t=new a({url:importUrl,autoUpload:!0,removeAfterUpload:!0});return t.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<10}}),t.setDataRow=function(t){(e=t).uploaded=!1},t.filters.push(function(e){return console.info("filter2"),!0}),t.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},t.onSuccessItem=function(t,a,r,n){let l=angular.fromJson(a);if(l.error)return e.message=l.errorMsg,void o.showError(l.title,e.message);e.message=l.msg,o.showMessage("Info",e.message),this.clearAll()},t.onErrorItem=function(e,t,a,r){o.showError("Error","Error while uploading the file ")},t.onCancelItem=function(e,t,a,o){console.info("onCancelItem",e,t,a,o)},t.clearAll=function(){e.uploaded=!1,angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)})},t.cancel=function(){e.uploaded=!1,angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)}),delete e.fileId,delete e.attachedfilename,t.queue=[]},t},l.bulkUploader.setDataRow(l.bulkAttachRow),l.deleteInternal=function(t){let a={ds:d.customObject,operation:"DELETE",wC:"ID = ?",params:[t]};e.save({method:"update"},a,function(e){"E"===e.status?o.showError(e.title,e.errorMsg):f(l.pagenate.offset,l.pagenate.limit,"Y")})},l.delete=function(e){t.swal({title:"Warning",text:"Are  you sure, you want to delete the customer?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},function(t){t&&l.deleteInternal(e)})}}}}).directive("doneBufferTable",function(e,t,a,o,r,n,l,s,i){return{restrict:"E",scope:{md:"=colMd",tableContext:"=tableContext"},templateUrl:"./tmplts/doneBufferTable.html",controller:function(l,c,u){var d=l.md,m=l.tableContext;if(l.distance=0,l.paginating=!1,l.enabled=!0,l.tableContext&&(l.tableContext.getRows=function(){return l._dtableData}),d&&m)if(d.columns){l._columns=d.columns;var p=d.limit;l._searchcolumns=[];for(var g=0;g<l._columns.length;g++)"Y"===l._columns[g].sortable?l._columns[g].sort=!0:l._columns[g].sort=!1,l._columns[g].template&&(l._columns[g].template=n.trustAsHtml(l._columns[g].template)),"Y"!==l._columns[g].enableSearch||l._columns[g].enableCondition&&"Y"!==l._columns[g].enableCondition||l._searchcolumns.push(l._columns[g]);l.searchParams={};var f="";for(g=0;g<l._searchcolumns.length;g++){var h=l._searchcolumns[g];0!==g&&g%2==0&&(f+="</div>"),g%2==0&&(f+='<div class="form-group">'),f+='<label class="col-lg-2 control-label"> '+h.label+"</label>",f+='<div class="col-lg-4">',h.type&&"combostore"===angular.lowercase(h.type)?(f+=' <done-select ng-model="searchParams.'+h.attributeName+'" ',h.simplecombovals?(f+=' simple-combo = "Y" ',f+=' values = "'+h.simplecombovals+'" '):(f+=' custom-object="'+h.customobject+'" ',f+=' key-attribute="'+h.keyattribute+'" ',f+=' label-attribute="'+h.labelattribute+'"',h.whereclause&&(f+=' where-clause="'+h.whereclause+'"'),h.orderby&&(f+=' order-by="'+h.orderby+'"'),h.params&&(f+=' params ="'+h.params+'"')),f+="></done-select> "):h.type&&"checkbox"===angular.lowercase(h.type)?(f+='<div class="checkbox">',f+=" <label>",f+=' <input type="checkbox" ng-true-value="\'Y\'" ng-false-value="\'N\'" ng-model="searchParams.'+h.attributeName,"Y"!==_formMetaData.isReadOnly&&"Y"!==h.isReadOnly||(f+="disabled"),f+='"> ',f+=' <span class="cr"><i class="cr-icon glyphicon glyphicon-ok"></i></span>',f+="</label>",f+="</div>"):h.type&&"date"===angular.lowercase(h.type)?(f+='<div class="input-group date">',f+=' <input ng-model="searchParams.'+h.attributeName+'" type="datetime" class="form-control" ',f+=' date-time=""  min-view="date" auto-close="true" format="dd/MM/yyyy"> ',f+=' <span class="input-group-addon"><i class="fa fa-calendar"></i></span> ',f+=" </div>"):(f+=' <input placeholder="'+h.label+'" class="form-control"',f+=' ng-model="searchParams.'+h.attributeName+'" type="text">'),f+="</div>",g===l._searchcolumns.length-1&&(f+="</div>")}l.searchHtml=f,l.pagenate={},l.pagenate.limit=10,p&&(l.pagenate.limit=p),l.pagenate.offset=0,l.pagenate.currentPage=1,l.doneLoading=!1;var b=function(e,t,a,o,n,s){if(l.isLoading=!0,!0!==l.paginating){l.paginating=!0;var i=d.orderBy;if(s&&(i=s),d.qid&&d.qcolumn){if(o&&o.length>0?o+=" AND ":(o="",n=[]),d.qcolumn.indexOf(",")>-1)for(var c=d.qcolumn.split(","),u=0;u<c.length;u++)o+=c[u]+" = ? ",u<c.length-1&&(o+=" AND ");else o+=d.qcolumn+" = ? ";if(angular.isArray(d.qid))for(var m=0;m<d.qid.length;m++)n.push(d.qid[m]);else n.push(d.qid)}r.queryResultWithCallback(d.customObject,"_NOCACHE_",o,n,i,function(e){var t;l.isLoading=!1,l.paginating=!1,a?(l.pagenate.totalPages=e.cnt,t=e.data):t=e,l._dtableData&&l._dtableData.length>0?t.forEach(function(e){l._dtableData.push(e)}):l._dtableData=t,e&&0==e.data.length&&(l.doneLoading=!0),l.pagenate.offset+=l.pagenate.limit,d.onQueryCallback&&d.onQueryCallback(l._dtableData)},t,e,a)}};l._dtableData=[],l.getMore=function(){if(!(l.doneLoading||l.isLoading||l.defferedScheduler)){var e=l._dtableData.length?100:0;l.defferedScheduler=i(function(){b(l.pagenate.offset,l.pagenate.limit,"Y",l.wc,l.wcParams),delete l.defferedScheduler},e)}},l.sort=function(e){var t;e.sort?(e.sort=!1,t=e.attributeName+" DESC"):(e.sort=!0,t=e.attributeName+" ASC"),l.pagenate.offset=0,l.pagenate.currentPage=1,b(l.pagenate.offset,l.pagenate.limit,"Y",l.wc,l.wcParams,t)},l.tableContext.getUnSavedChanges=function(){var e=[];if(l._dtableData&&l._dtableData.length)for(var t=0;t<l._dtableData.length;t++){var a=l._dtableData[t];a&&"Y"===a.is_selected&&e.push(a)}return e},l.gotoPage=function(e){l.pagenate.currentPage=e,l.pagenate.offset=1==e?0:e*l.pagenate.limit-l.pagenate.limit;b(l.pagenate.offset,l.pagenate.limit,void 0,l.wc,l.wcParams)},l.tableContext.refresh=function(){b(0,l.pagenate.limit,"Y",l.wC,l.wCParams)},l.search=function(){l.wc="",l.wcParams=[],l._dtableData=[];for(var e=0;e<d.columns.length;e++)if("Y"===d.columns[e].enableSearch){var t=d.columns[e].attributeName;if(l.searchParams[t])if(l.wcParams.length>=1&&(l.wc+=" AND "),"date"==d.columns[e].type){d.columns[e].operator?("lte"===d.columns[e].operator&&(l.wc+=d.columns[e].attributeName+" <=  ? "),"lt"===d.columns[e].operator&&(l.wc+=d.columns[e].attributeName+" <  ? "),"gt"===d.columns[e].operator&&(l.wc+=d.columns[e].attributeName+" >  ? "),"gte"===d.columns[e].operator&&(l.wc+=d.columns[e].attributeName+" >=  ? "),"eq"===d.columns[e].operator&&(l.wc+=" DATE_FORMAT("+d.columns[e].attributeName+",'%d-%m-%Y') =  DATE_FORMAT(?,'%d-%m-%Y') ")):l.wc+=d.columns[e].attributeName+" >=  ? ";var a=s.convertDBDate(l.searchParams[d.columns[e].attributeName]);l.wcParams.push(a)}else l.wc+=" lower("+d.columns[e].attributeName+") like lower(?)",l.wcParams.push("%"+l.searchParams[d.columns[e].attributeName]+"%")}l.pagenate.offset=0,l.pagenate.limit=10,p&&(l.pagenate.limit=p),b(l.pagenate.offset,l.pagenate.limit,"Y",l.wc,l.wcParams)},l.clear=function(){l.searchParams=[],delete l.wc,delete l.wcParams,l.doneLoading=!1,l.pagenate.currentPage=1,l.pagenate.offset=0,l.pagenate.limit=10,l._dtableData=[],p&&(l.pagenate.limit=p),b(l.pagenate.offset,l.pagenate.limit,"Y")};l.bulkAttachRow={},l.bulkUploader=new function(){var e,t=new a({url:importUrl,autoUpload:!0,removeAfterUpload:!0});return t.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<10}}),t.setDataRow=function(t){(e=t).uploaded=!1},t.filters.push(function(e){return console.info("filter2"),!0}),t.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},t.onSuccessItem=function(t,a,r,n){var l=angular.fromJson(a);if(l.error)return e.message=l.errorMsg,void o.showError(l.title,e.message);e.message=l.msg,o.showMessage("Info",e.message),this.clearAll()},t.onErrorItem=function(e,t,a,r){o.showError("Error","Error while uploading the file ")},t.onCancelItem=function(e,t,a,o){console.info("onCancelItem",e,t,a,o)},t.clearAll=function(){e.uploaded=!1,angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)})},t.cancel=function(){e.uploaded=!1,angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)}),delete e.fileId,delete e.attachedfilename,t.queue=[]},t},l.bulkUploader.setDataRow(l.bulkAttachRow),l.deleteInternal=function(t){var a={ds:d.customObject,operation:"DELETE",wC:"ID = ?",params:[t]};e.save({method:"update"},a,function(e){"E"===e.status?o.showError(e.title,e.errorMsg):b(l.pagenate.offset,l.pagenate.limit,"Y")})},l.delete=function(e){t.swal({title:"Warning",text:"Are  you sure, you want to delete the customer?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},function(t){t&&l.deleteInternal(e)})}}else o.showError("Setup Error","Please configure columns in table metadata");else o.showError("Setup Error","Missing one of the value [md, tableContext] !")}}}).directive("doneForm",function(e,t,a,o,r,n,l,s){return{restrict:"E",scope:{md:"=colMd",formContext:"=formContext"},templateUrl:"./tmplts/doneForm.html",controller:function(t,a,o){let l=t.md,i=t.formContext;if(!l||!i)return void r.showError("Setup Error","Missing one of the value [md, tableContext] !");if(!l.columns)return void r.showError("Setup Error","Please configure columns in table metadata");t._columns=l.columns;l.limit;t._searchcolumns=[];let c="";t.item={},t.formContext._formData=t.item;let u=0;t._columns.length;if(l.isVertical)for(let e=0;e<t._columns.length;e++){let a=t._columns[e];a.initValue&&(t.item[a.attributeName]=a.initValue),a.type&&"keycolumn"===angular.lowercase(a.type)?(t.item[a.attributeName]=i[a.keycolumnname],0):(c+='<div class="form-group">',c+='<label class="col-lg-4 control-label"> '+a.label+"</label>",c+='<div class="col-lg-8">',a.type&&"combostore"===angular.lowercase(a.type)?(c+=' <done-select  ng-model="item.'+a.attributeName+'" ',a.simplecombovals?(c+=' simple-combo = "Y" ',c+=' values = "'+a.simplecombovals+'" '):(c+=' custom-object="'+a.customobject+'" ',c+=' key-attribute="'+a.keyattribute+'" ',c+=' label-attribute="'+a.labelattribute+'"',a.whereclause&&(c+=' where-clause="'+a.whereclause+'"'),a.params&&(c+=' params ="'+a.params+'" ')),a.action?c+=' done-change="formContext.'+a.action+'" ':(t.formContext.onSelect=function(e,o){console.log(e,o),t.item[a.attributeName]=o},c+=' done-change="formContext.onSelect" '),c+=' parent-row="item" ',c+="></done-select> "):a.type&&"multicombostore"===angular.lowercase(a.type)?(c+=' <done-multi-select ng-if="loadFormData" ng-model="item.'+a.attributeName+'" ',c+=' custom-object="'+a.customobject+'" ',c+=' key-attribute="'+a.keyattribute+'" ',c+=' label-attribute="'+a.labelattribute+'"',a.whereclause&&(c+=' where-clause="'+a.whereclause+'"'),a.orderby&&(c+=' order-by="'+a.orderby+'"'),a.params&&(c+=' params ="'+a.params+'"'),c+=' parent-row="item" ',c+=' done-change="formContext.onComboStoreChange" ',c+="></done-multi-select> "):a.type&&"typeaheadstore"===angular.lowercase(a.type)?(c+=' <done-type-ahead ng-if="loadFormData" ng-model="item.'+a.attributeName+'" ',c+=' custom-object="'+a.customobject+'" ',c+=' key-attribute="'+a.keyattribute+'" ',c+=' label-attribute="'+a.labelattribute+'"',a.whereclause&&(c+=' where-clause="'+a.whereclause+'"'),a.orderby&&(c+=' order-by="'+a.orderby+'"'),a.params&&(c+=' params ="'+a.params+'"'),c+=' parent-row="item" ',c+=' done-change="formContext.onComboStoreChange" ',c+="></done-type-ahead> "):a.type&&"date"===angular.lowercase(a.type)?(c+='<div class="input-group date">',c+=' <input ng-model="item.'+a.attributeName+'" type="datetime" class="form-control" ',c+=' date-time=""  min-view="date" auto-close="true" format="dd/MM/yyyy"',"Y"===a.isRequired&&(c+=" required "),"Y"!==l.isReadOnly&&"Y"!==a.isReadOnly||(c+="disabled"),c+="> ",c+=' <span class="input-group-addon"><i class="fa fa-calendar"></i></span> ',c+=" </div>"):a.type&&"checkbox"===angular.lowercase(a.type)?(c+='<div class="checkbox">',c+=" <label>",c+=' <input type="checkbox" ng-true-value="\'Y\'" ng-false-value="\'N\'" ng-model="item.'+a.attributeName,"Y"!==l.isReadOnly&&"Y"!==a.isReadOnly||(c+="disabled"),c+='"> ',c+=' <span class="cr"><i class="cr-icon glyphicon glyphicon-ok"></i></span>',c+="</label>",c+="</div>"):a.type&&"textarea"===angular.lowercase(a.type)?(c+=' <textarea placeholder="'+a.label+'" class="form-control"',c+=' ng-model="item.'+a.attributeName+'" type="text"',"Y"===a.isRequired&&(c+=" required "),"Y"!==l.isReadOnly&&"Y"!==a.isReadOnly||(c+="disabled"),a.function&&(c+=' ng-value = "formContext.'+a.function+'(item)"'),c+="></textarea> "):(c+=' <input placeholder="'+a.label+'" class="form-control"',c+=' ng-model="item.'+a.attributeName+'" type="text"',"Y"===a.isRequired&&(c+=" required "),"Y"!==l.isReadOnly&&"Y"!==a.isReadOnly||(c+="disabled"),a.function&&(c+=' ng-value = "formContext.'+a.function+'(item)"'),c+="> "),c+="</div>",c+="</div>",u++)}else for(let e=0;e<t._columns.length;e++){let a=t._columns[e];a.initValue&&(t.item[a.attributeName]=a.initValue),a.type&&"keycolumn"===angular.lowercase(a.type)?(t.item[a.attributeName]=i[a.keycolumnname],0):(0!==u&&u%2==0&&(c+="</div>"),u%2==0&&(c+='<div class="form-group">'),c+='<label class="col-lg-2 control-label"> '+a.label+"</label>",c+='<div class="col-lg-4">',a.type&&"combostore"===angular.lowercase(a.type)?(c+=' <done-select ng-model="item.'+a.attributeName+'" ',a.simplecombovals?(c+=' simple-combo = "Y" ',c+=' values = "'+a.simplecombovals+'" '):(c+=' custom-object="'+a.customobject+'" ',c+=' key-attribute="'+a.keyattribute+'" ',c+=' label-attribute="'+a.labelattribute+'"',a.whereclause&&(c+=' where-clause="'+a.whereclause+'"'),a.params&&(c+=' params ="'+a.params+'" ')),a.action?c+=' done-change="formContext.'+a.action+'" ':(t.formContext.onSelect=function(e,t){console.log(e,t)},c+=' done-change="formContext.onSelect" '),c+=' parent-row="item" ',c+="></done-select> "):a.type&&"multicombostore"===angular.lowercase(a.type)?(c+=' <done-multi-select ng-if="loadFormData" ng-model="item.'+a.attributeName+'" ',c+=' custom-object="'+a.customobject+'" ',c+=' key-attribute="'+a.keyattribute+'" ',c+=' label-attribute="'+a.labelattribute+'"',a.whereclause&&(c+=' where-clause="'+a.whereclause+'"'),a.orderby&&(c+=' order-by="'+a.orderby+'"'),a.params&&(c+=' params ="'+a.params+'"'),c+=' parent-row="item" ',c+=' done-change="formContext.onComboStoreChange" ',c+="></done-multi-select> "):a.type&&"typeaheadstore"===angular.lowercase(a.type)?(c+=' <done-type-ahead ng-if="loadFormData" ng-model="item.'+a.attributeName+'" ',c+=' custom-object="'+a.customobject+'" ',c+=' key-attribute="'+a.keyattribute+'" ',c+=' label-attribute="'+a.labelattribute+'"',a.whereclause&&(c+=' where-clause="'+a.whereclause+'"'),a.orderby&&(c+=' order-by="'+a.orderby+'"'),a.params&&(c+=' params ="'+a.params+'"'),c+=' parent-row="item" ',c+=' done-change="formContext.onComboStoreChange" ',c+="></done-type-ahead> "):a.type&&"date"===angular.lowercase(a.type)?(c+='<div class="input-group date">',c+=' <input ng-model="item.'+a.attributeName+'" type="datetime" class="form-control" ',c+=' date-time=""  min-view="date" auto-close="true" format="dd/MM/yyyy"',"Y"===a.isRequired&&(c+=" required "),"Y"!==l.isReadOnly&&"Y"!==a.isReadOnly||(c+="disabled"),c+="> ",c+=' <span class="input-group-addon"><i class="fa fa-calendar"></i></span> ',c+=" </div>"):a.type&&"checkbox"===angular.lowercase(a.type)?(c+='<div class="checkbox">',c+=" <label>",c+=' <input type="checkbox" ng-true-value="\'Y\'" ng-false-value="\'N\'" ng-model="item.'+a.attributeName,"Y"!==l.isReadOnly&&"Y"!==a.isReadOnly||(c+="disabled"),c+='"> ',c+=' <span class="cr"><i class="cr-icon glyphicon glyphicon-ok"></i></span>',c+="</label>",c+="</div>"):a.type&&"textarea"===angular.lowercase(a.type)?(c+=' <textarea placeholder="'+a.label+'" class="form-control"',c+=' ng-model="item.'+a.attributeName+'" type="text"',"Y"===a.isRequired&&(c+=" required "),"Y"!==l.isReadOnly&&"Y"!==a.isReadOnly||(c+=" disabled "),a.cols&&(c+=' cols ="'+a.cols+'" '),a.rows&&(c+=' rows ="'+a.rows+'" '),a.function&&(c+=' ng-value = "formContext.'+a.function+'(item)"'),c+="></textarea> "):(c+=' <input placeholder="'+a.label+'" class="form-control"',c+=' ng-model="item.'+a.attributeName+'" type="text"',"Y"===a.isRequired&&(c+=" required "),"Y"!==l.isReadOnly&&"Y"!==a.isReadOnly||(c+="disabled"),a.function&&(c+=' ng-value = "formContext.'+a.function+'(item)"'),c+="> "),c+="</div>",u===t._columns.length-1&&(c+="</div>"),u++)}t.formHtml=c;let d=s.create("_frmStore_"+l.id,l.customObject);t.loadFormData=!1;let m=function(e,a,o,r,s){t.isLoading=!0;n.queryResultWithCallback(l.customObject,"_NOCACHE_",r,s,void 0,function(e){t.isLoading=!1,t.item=e[0];for(let e=0;e<t._columns.length;e++){let a=t._columns[e];if(a.function){let e=a.function;t.item[a.attributeName]=e(t.item)}}l.onQueryCallback&&l.onQueryCallback(t.item),t.loadFormData=!0},a,e,void 0)};if(l.qid&&"new"!==l.qid){let e=" ID = ? ";l.qcolumn&&(e=l.qcolumn+" = ?"),m(0,1,0,e,[l.qid])}else t.loadFormData=!0;t.formContext.refresh=function(e){let t=" ID = ? ";l.qcolumn&&(t=l.qcolumn+" = ?"),m(0,1,0,t,[e])},t.formContext.clear=function(){for(let e=0;e<t._columns.length;e++){let a=t._columns[e];"keycolumn"!==angular.lowercase(a.type)&&delete t.item[a.attributeName]}};let p=function(t,a){return(t.data[a]||t.data[angular.uppercase(a)])&&(t.data[a]&&(t.data[a]=e.convertDBDate(t.data[a])),t.data[angular.uppercase(a)]&&(t.data[angular.uppercase(a)]=e.convertDBDate(t.data[angular.uppercase(a)]))),t};t.formContext.save=function(){t.formContext.operation="MODIFIED";let a={},o=angular.copy(t.item),r=angular.copy(t.item);a.data=o,a=p(a,"creation_date"),a=p(a,"last_update_date");for(let o=0;o<t._columns.length;o++){let r=t._columns[o];if(r.type&&"date"==angular.lowercase(r.type)){let o=t.item[r.attributeName];o=e.convertDBDate(o),a.data[r.attributeName]=o}else if(r.type&&"multicombostore"==angular.lowercase(r.type)||"typeaheadstore"==angular.lowercase(r.type)){let e=t.item[r.attributeName][r.keyattribute];a.data[r.attributeName]=e}else a.data[r.attributeName]=t.item[r.attributeName]}for(let o in a.data)t._columns.filter(e=>e[o])||(o.indexOf("_date")>-1||o.indexOf("_DATE")>-1)&&a.data[o]&&a.data[o].indexOf("T")>-1&&(a.data[o]=e.convertDBDate(a.data[o]));if("Y"==l.custUpdate){let e={data:{}};for(let o=0;o<t._columns.length;o++){let r=t._columns[o];e.data[r.attributeName]=a.data[r.attributeName]}a=e}if(t.formContext.beforeSave){if(!t.formContext.beforeSave(a.data))return}a.operation="INSERT",l.qid&&"new"!==l.qid?(a.operation="UPDATE",l.qcolumn&&l.qcolumn.length>0?a.data[l.qcolumn]=l.qid:a.data.ID=l.qid,"Y"==l.custUpdate&&(a.data.custUpdate="Y")):(a.data.isGenIds="Y",delete a.data.ID,delete a.data[l.qcolumn]);let n=d.save(a);l.onSaveCallback&&n.then(function(e){l.onSaveCallback(e,r),"N"!==l.clearOnSave&&t.formContext.clear()})},t.formContext.getData=function(){return t.item}}}}).directive("doneSelect",function(e,t,a,o){return{restrict:"E",transclude:!0,scope:{id:"@selectId",customobject:"@customObject",ngmodel:"=ngModel",key:"@keyAttribute",label:"@labelAttribute",donechange:"&doneChange",parentrow:"=parentRow",doneclick:"=doneClick",ngchange:"&ngChange",isdisabled:"@isDisabled",whereclause:"@whereClause",simplecombo:"@simpleCombo",orderBy:"@orderBy",values:"@values",params:"@params",paramVals:"=paramVals"},templateUrl:"./tmplts/doneSelect.html",link:function(a,o,r){if(a.donechange&&(a.donechangeM=function(){a.donechange&&a.$eval(a.donechange).call([],a.parentrow,a.ngmodel)}),a.simplecombo&&"N"!==a.simplecombo||a.customobject&&a.key&&a.label)if(!a.simplecombo||"Y"!==a.simplecombo||a.values)if(a.simplecombo){let t=a.values.split(",");a.resultData=[],a.key="key",a.label="label";for(let o=0;o<t.length;o++){let r=t[o].split(":");(!r||r.length<2)&&e.showError("Setup Error","Values are not configured properly for simple combo box"),a.resultData.push({key:r[0],label:r[1]})}}else{let e,o,r,n=function(e,o,r,n,l,s){a.isLoading=!0;var i=a.id+btoa(r+"_"+n);t.queryResultWithCallback(a.customobject,i,n,l,s,function(e){a.isLoading=!1,a.resultData=e},o,e,void 0,void 0,r)},l=a.key+","+a.label;a.whereclause&&(e=a.whereclause),a.params&&(o=[a.params]),a.paramVals&&(o=[a.paramVals]),a.orderBy&&(r=a.orderBy),n(0,3e3,l,e,o,r)}else e.showError("Setup Error","Missing one of the value [values] !");else e.showError("Setup Error","Missing one of the value [customobject, labelattribute,keyattribute] !")}}}).directive("doneTypeAhead",function(e,t,a,o){return{restrict:"E",transclude:!0,scope:{id:"@selectId",customobject:"@customObject",ngmodel:"=ngModel",parentrow:"=parentRow",key:"@keyAttribute",label:"@labelAttribute",donechange:"&doneChange",doneclick:"=doneClick",ngchange:"&ngChange",whereclause:"@whereClause",simplecombo:"@simpleCombo",orderBy:"@orderBy",values:"@values",params:"@params",paramVals:"=paramVals"},templateUrl:"./tmplts/typeAheadSelect.html",link:function(e,a,o){if(e.resultData={},e.donechange&&(e.donechangeMulti=function(){e.donechange&&e.$eval(e.donechange).call([],e.parentrow,e.ngmodel)}),!e.simplecombo){let a,o,r,n=function(a,o,r,n,l,s){e.isLoading=!0;var i=e.id+btoa(r+"_"+n);t.queryResultWithCallback(e.customobject,i,n,l,s,function(t){e.isLoading=!1,e.ngmodel&&e.ngmodel[e.key]&&!e.ngmodel[e.label]?t.filter(t=>{t[e.key]!==e.ngmodel[e.key]||(e.ngmodel=t)}):e.ngmodel&&t.filter(t=>{t[e.key]!==e.ngmodel||(e.ngmodel=t)}),console.log(e.ngmodel),e.resultData=t},o,a,void 0,void 0,r)},l=e.key+","+e.label;e.whereclause&&(a=e.whereclause),e.params&&(o=[e.params]),e.paramVals&&(o=[e.paramVals]),e.orderBy&&(r=e.orderBy),n(0,3e3,l,a,o,r)}}}}).directive("doneMultiSelect",function(e,t,a,o){return{restrict:"E",transclude:!0,scope:{id:"@selectId",customobject:"@customObject",ngmodel:"=ngModel",parentrow:"=parentRow",key:"@keyAttribute",label:"@labelAttribute",donechange:"&doneChange",doneclick:"=doneClick",ngchange:"&ngChange",whereclause:"@whereClause",simplecombo:"@simpleCombo",orderBy:"@orderBy",values:"@values",params:"@params",paramVals:"=paramVals"},templateUrl:"./tmplts/doneMultiSelect.html",link:function(e,a,o){if(e.resultData={},e.donechange&&(e.donechangeMulti=function(){e.donechange&&e.$eval(e.donechange).call([],e.parentrow,e.ngmodel)}),!e.simplecombo){let a,o,r,n=function(a,o,r,n,l,s){e.isLoading=!0;var i=e.id+btoa(r+"_"+n);t.queryResultWithCallback(e.customobject,i,n,l,s,function(t){e.isLoading=!1,e.ngmodel&&e.ngmodel[e.key]&&!e.ngmodel[e.label]&&t.filter(t=>{t[e.key]!==e.ngmodel[e.key]||(e.ngmodel=t)}),console.log(e.ngmodel),e.resultData=t},o,a,void 0,void 0,r)},l=e.key+","+e.label;e.whereclause&&(a=e.whereclause),e.params&&(o=[e.params]),e.paramVals&&(o=[e.paramVals]),e.orderBy&&(r=e.orderBy),n(0,3e3,l,a,o,r)}}}}).directive("doneMaskPage",function(e,t,a,o){return{restrict:"E",scope:{styleConfig:"=styleConfig"},templateUrl:"./tmplts/loadingMask.html",controller:function(e,t,a){e.styleConfig}}}).directive("doneShrinkPage",function(e,t,a,o){return{restrict:"E",scope:{styleConfig:"=styleConfig"},templateUrl:"./tmplts/shrinkPage.html",controller:function(e,t,a){e.styleConfig}}}).directive("bindHtmlCompile",["$compile",function(e){return{restrict:"A",link:function(t,a,o){t.$watch(function(){return t.$eval(o.bindHtmlCompile)},function(r){a.html(r&&r.toString());var n=t;o.bindHtmlScope&&(n=t.$eval(o.bindHtmlScope)),e(a.contents())(n)})}}}]).directive("doneBarChart",function(e,t){return{restrict:"EA",scope:{customobject:"=",keyattribute:"=",labelattribute:"="},templateUrl:"common/chart.html",controller:function(a,o,r){var n=r.customobject,l=r.keyattribute,s=r.labelattribute;if(n&&l&&s){var i=r.wc;a.chartOptions={series:{bars:{show:!0,barWidth:.6,fill:!0,fillColor:{colors:[{opacity:.8},{opacity:.8}]}}},colors:["#1ab394"],grid:{color:"#999999",hoverable:!0,clickable:!0,tickColor:"#D4D4D4",borderWidth:0},xaxis:{mode:"categories",tickLength:0}},a.chartData=[{label:"Order Amount",data:[]}];t.queryResultWithCallback(n,"_NOCACHE_",i,void 0,void 0,function(e){if(e)for(var t=0;t<e.length;t++){var o=[];o.push(e[t][l]),o.push(e[t][s]),a.chartData[0].data.push(o)}},void 0,void 0,void 0,void 0,l+","+s)}else e.showError("Error","Missing one of the value [customobject, keyattribute, labelattribute]!")}}}).directive("doneLineChart",function(e,t){return{restrict:"EA",scope:{customobject:"=",keyattribute:"=",labelattribute:"="},templateUrl:"common/chart.html",controller:function(a,o,r){var n=r.customobject,l=r.keyattribute+"",s=r.labelattribute+"";if(n&&l&&s){var i=r.wc;a.chartOptions={series:{lines:{show:!0,lineWidth:2,fill:!0,fillColor:{colors:[{opacity:0},{opacity:0}]}}},xaxis:{mode:"categories",tickLength:0},colors:["#1ab394"],grid:{color:"#999999",hoverable:!0,clickable:!0,tickColor:"#D4D4D4",borderWidth:0},legend:{show:!1},tooltip:!0,tooltipOpts:{content:"x: %x, y: %y"}},a.chartData=[{label:"line",data:[]}];t.queryResultWithCallback(n,"_NOCACHE_",i,void 0,void 0,function(e){if(e)for(var t=0;t<e.length;t++){var o=[];o.push(e[t][l]),o.push(e[t][s]),a.chartData[0].data.push(o)}},void 0,void 0,void 0,void 0,l+","+s)}else e.showError("Error","Missing one of the value [customobject, keyattribute, labelattribute]!")}}}).directive("donePieChart",function(e,t){return{restrict:"EA",scope:{customobject:"=",keyattribute:"=",labelattribute:"="},templateUrl:"common/chart.html",controller:function(a,o,r){var n=r.customobject,l=r.keyattribute+"",s=r.labelattribute+"";if(n&&l&&s){var i=r.wc,c=["#d3d3d3","#2E86C1","#CD6155","#2E4053","#4D5656","#58D68D","#d3d3d3","#2E86C1","#CD6155","#2E4053","#4D5656","#58D68D"];a.chartData=[],a.chartOptions={series:{pie:{show:!0}},grid:{hoverable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!0}};t.queryResultWithCallback(n,"_NOCACHE_",i,void 0,void 0,function(e){if(e)for(var t=0;t<e.length;t++){var o={};o.label=e[t][l],o.data=e[t][s],o.color=c[t],a.chartData.push(o)}},void 0,void 0,void 0,void 0,l+","+s)}else e.showError("Error","Missing one of the value [customobject, keyattribute, labelattribute]!")}}}).factory("DoneStore",function(e,t,a,o,r){function n(n,l){l=l;var s,i,c,u,d,m=[],p=0,g=20;this.setOffset=function(e){p=e},this.setOrderBy=function(e){c=e},this.setLimit=function(e){g=e},this.getLimit=function(){return g},this.setGroupBy=function(e){u=e},this.getGroupBy=function(){return u},this.setSelectClause=function(e){i=e},this.getSelectClause=function(){return i},this.setWhereClause=function(e){s=e},this.setWhereClauseParams=function(e){m=e},this.beforeQueryListener=function(e){d=e},this.getCustomObject=function(){return l},this.query=function(){var e=r.defer();d&&d();return o.queryResultWithCallback(l,"_NOCACHE_",s,m,c,function(t){var a={};t,a=t,p+=g,e.resolve(a)},g,p,"N",void 0,i,u),e.promise},this.save=function(o){var n=r.defer();return"Y"===o.custUpdate&&"Y"!=o.data.custUpdate||"UPDATE"!=o.operation||(o.data.LAST_UPDATE_DATE=e.convertDBDate(new Date),o.data.CREATION_DATE=e.convertDBDate(o.data.CREATION_DATE)),o.ds=l,a.save({method:"update"},o,function(e){"E"===e.status?t.showError(e.title,e.errorMsg):(t.showMessage("Success","Data posted successfully!"),function(e){n.resolve(e)}(e))}),n.promise},this.convertDate=function(t,a,o){if(t[a]||t[angular.uppercase(a)]){if(t[a]){var r=e.convertDBDate(t[a]);o&&"Y"===o&&(r=e.convertDBDate(new Date)),t[a]=r}if(t[angular.uppercase(a)]){r=e.convertDBDate(t[angular.uppercase(a)]);o&&"Y"===o&&(r=e.convertDBDate(new Date)),t[angular.uppercase(a)]=r}}return t},this.getSelectedItems=function(e,t){for(var a={list:[]},o=0;o<e.length;o++){var r=angular.copy(e[o]),n={ds:l,operation:t};"UPDATE"==t&&(r=this.convertDate(r,"last_update_date"),r=this.convertDate(r,"creation_date")),n.data=r,a.list.push(n)}return a},this.saveAll=function(e,o){var n=r.defer(),l=this.getSelectedItems(e,o);return a.save({method:"update"},l,function(e){"E"===e.status?t.showError(e.title,e.errorMsg):(t.showMessage("Success","Data posted successfully!"),function(e){n.resolve(e)}(e))}),n.promise}}return{get:function(e,t){return new n(e,t)}}}).factory("DoneMsgbox",function(e,t,a){var o=e.$new();return{show:function(e,r,n,l,s){var i=a.defer();return s=s||{},t.open({template:'<style> .panel-warning {} .panel-footer { background-color:#ffffff; margin-bottom: -15px; padding: 5px 0px 0px 5px; border-top: 1px solid #ddd; border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;}</style><div class="panel {{msgstyle}}"><div class="panel-heading"><i class="{{icon}}"></i> {{title}}</div><div class="panel-body"><p>{{message}}</p></div><div class="panel-footer" ng-if="footer === Y"><button class="btn btn-primary btn-sm" data-ng-click="ok($event)"><i class="fa fa-check-circle"></i> Ok</button> <button class="btn btn-default btn-sm" data-ng-click="cancel($event)" data-ng-show="isConfirm"><i class="fa fa-times"></i> Cancel</button></div></div>',scope:o,controller:function(t,a){t.title=r,t.message=n,t.isConfirm="Y"===l,"Error"===e?(t.msgstyle="panel-danger",t.icon="fa fa-bug"):"Info"===e?(t.msgstyle="panel-primary",t.icon="fa fa-info"):(t.msgstyle="panel-warning",t.icon="fa fa-warning"),"Y"==s.footer&&(t.footer="Y"),t.ok=function(e){e.preventDefault(),a.close(),i.resolve()},t.cancel=function(e){e.preventDefault(),a.close(),i.reject()}},size:"sm",backdrop:"static",keyboard:!1}),i.promise}}}).service("DoneStoreCache",function(e){this.map={},this.create=function(t,a){if(this.map[t])return this.map[t];var o=e.get(t,a);return this.map[t]=o,o},this.get=function(e){return this.map[e]}}),angular.module("doneComponentsSet").directive("paging",function(){var e=/\{page\}/g;return{restrict:"EA",link:function(e,a,n){e.$watchCollection("[page,pageSize,total,disabled]",function(){!function(e,a){(!e.pageSize||e.pageSize<=0)&&(e.pageSize=1);var n,i,c=Math.ceil(e.total/e.pageSize);(function(e,a){e.List=[],e.Hide=!1,e.page=parseInt(e.page)||1,e.total=parseInt(e.total)||0,e.adjacent=parseInt(e.adjacent)||2,e.pgHref=e.pgHref||"",e.dots=e.dots||"...",e.ulClass=e.ulClass||"pagination",e.activeClass=e.activeClass||"active",e.disabledClass=e.disabledClass||"disabled",e.textFirst=e.textFirst||"<<",e.textLast=e.textLast||">>",e.textNext=e.textNext||">",e.textPrev=e.textPrev||"<",e.textFirstClass=e.textFirstClass||"",e.textLastClass=e.textLastClass||"",e.textNextClass=e.textNextClass||"",e.textPrevClass=e.textPrevClass||"",e.textTitlePage=e.textTitlePage||"Page {page}",e.textTitleFirst=e.textTitleFirst||"First Page",e.textTitleLast=e.textTitleLast||"Last Page",e.textTitleNext=e.textTitleNext||"Next Page",e.textTitlePrev=e.textTitlePrev||"Previous Page",e.hideIfEmpty=t(e,a.hideIfEmpty),e.showPrevNext=t(e,a.showPrevNext),e.showFirstLast=t(e,a.showFirstLast),e.scrollTop=t(e,a.scrollTop),e.isDisabled=t(e,a.disabled)})(e,a),function(e,t){e.page>t&&(e.page=t);e.page<=0&&(e.page=1);e.adjacent<=0&&(e.adjacent=2);t<=1&&(e.Hide=e.hideIfEmpty)}(e,c);var u=2*e.adjacent+2;o(e,c,"prev"),c<=u+2?r(n=1,c,e):e.page-e.adjacent<=2?(r(n=1,i=1+u,e),s(c,e,i)):e.page<c-(e.adjacent+2)?(n=e.page-e.adjacent,i=e.page+e.adjacent,l(e,n),r(n,i,e),s(c,e,i)):(i=c,l(e,n=c-u),r(n,i,e));o(e,c,"next")}(e,n)})},template:function(e,t){return'<ul data-ng-hide="Hide" data-ng-class="ulClass"> <li title="{{Item.title}}" data-ng-class="Item.liClass" data-ng-repeat="Item in List"> <a '+(t.pgHref?'data-ng-href="{{Item.pgHref}}" ':"href ")+'data-ng-class="Item.aClass" data-ng-click="Item.action()" data-ng-bind="Item.value"></a> </li></ul>'},scope:{page:"=",pageSize:"=",total:"=",disabled:"@",dots:"@",ulClass:"@",activeClass:"@",disabledClass:"@",adjacent:"@",pagingAction:"&",pgHref:"@",textFirst:"@",textLast:"@",textNext:"@",textPrev:"@",textFirstClass:"@",textLastClass:"@",textNextClass:"@",textPrevClass:"@",textTitlePage:"@",textTitleFirst:"@",textTitleLast:"@",textTitleNext:"@",textTitlePrev:"@"}};function t(e,t){return!!angular.isDefined(t)&&!!e.$parent.$eval(t)}function a(e,t){e.page!=t&&(e.isDisabled||(e.page=t,e.pagingAction({page:e.page,pageSize:e.pageSize,total:e.total}),e.scrollTop&&scrollTo(0,0)))}function o(t,o,r){if(!(!t.showPrevNext&&!t.showFirstLast||o<1)){var n,l,s;if("prev"===r){n=t.page-1<=0;var i=t.page-1<=0?1:t.page-1;t.showFirstLast&&(l={value:t.textFirst,title:t.textTitleFirst,aClass:t.textFirstClass,page:1}),t.showPrevNext&&(s={value:t.textPrev,title:t.textTitlePrev,aClass:t.textPrevClass,page:i})}else{n=t.page+1>o;var c=t.page+1>=o?o:t.page+1;t.showPrevNext&&(l={value:t.textNext,title:t.textTitleNext,aClass:t.textNextClass,page:c}),t.showFirstLast&&(s={value:t.textLast,title:t.textTitleLast,aClass:t.textLastClass,page:o})}var u=function(o,r){return{title:o.title,aClass:o.aClass,value:o.aClass?"":o.value,liClass:r?t.disabledClass:"",pgHref:r?"":t.pgHref.replace(e,o.page),action:function(){r||a(t,o.page)}}};if(t.isDisabled&&(n=!0),l){var d=u(l,n);t.List.push(d)}if(s){var m=u(s,n);t.List.push(m)}}}function r(t,o,r){var n=0;for(n=t;n<=o;n++){var l=r.pgHref.replace(e,n),s=r.page==n?r.activeClass:"";r.isDisabled&&(l="",s=r.disabledClass),r.List.push({value:n,title:r.textTitlePage.replace(e,n),liClass:s,pgHref:l,action:function(){a(r,this.value)}})}}function n(e){e.List.push({value:e.dots,liClass:e.disabledClass})}function l(e,t){r(1,2,e),3!=t&&n(e)}function s(e,t,a){a!=e-2&&n(t),r(e-1,e,t)}});var doneServices=angular.module("doneServices",[]);doneServices.service("Util",function(e){this.trim=function(e){return function(e){return angular.isString(e)?e.replace(/^\s+|\s+$/g,""):e}},this.convertDate=function(t){return e("date")(t,"dd-MM-yyyy")},this.convertMMDate=function(t){return e("date")(t,"MM/dd/yyyy")},this.convertDBDate=function(t){return console&&console.log(t+":"+e("date")(t,"yyyy-MM-dd HH:mm:ss")),e("date")(t,"yyyy-MM-dd HH:mm:ss")},this.isEmpty=function(e){return void 0==e||0==e.trim().length}}),doneServices.service("BSServiceUtil",function(e,t,a,o){this.getLookups=function(e,t,a){var r="lookup_res_"+e;return a&&o.get(r)?o.get(r):(a||(r="_NOCACHE_"),this.queryResultWithCallback("c3pLookupsRef",r,"LOOKUP_TYPE = ?",[e],null,t))},this.removeData=function(e){o.remove(e)},this.queryResultWithCallback=function(r,n,l,s,i,c,u,d,m,p,g){var f={ds:r,executeCountSql:"N"};l&&(f.wC=l),s&&(f.params=s),i&&(f.oB=i),u&&(f.limit=u),d&&(f.offset=d),m&&(f.is_count="Y"),g&&(f.select=g);var h=a;p&&"Y"==p&&(h=t),h.query({method:"data"},f,function(t){"E"===t.status?e.showError(t.title,t.errorMsg):("Y"!=p&&t.data.length>0&&n&&"_NOCACHE_"!==n&&o.put(n,t.data),c&&c("Y"==p||m?t:t.data))})},this.queryResult=function(t,r){var n={ds:t,executeCountSql:"N"};"usersRef"===t&&(n.skipCondtions="Y"),n.oB="CREATION_DATE ASC",a.query({method:"data"},n,function(t){if(console.log(t),"E"===t.status)e.showError(t.title,t.errorMsg);else if(t.data.length>0)return o.put(r,t.data),o.get(r)})}}),doneServices.service("EmailService",function(e,t){this.sendEmail=function(a,o,r){var n={ds:"c3pEmailService",operation:"INSERT",data:{srcId:o,body:a,attachmentIds:r}};t.save({method:"update"},n,function(t){"E"===t.status&&e.showError(t.title,t.errorMsg)})}}),doneServices.service("CommentService",function(e,t){this.addComment=function(a,o){var r=a.comment;r.length>250&&(r=r.substring(0,240)),datajson={ds:"commActivitiesRef",operation:"INSERT",data:{SOURCE_OBJECT_ID:a.actId,ACTIVITY_NAME:r,ACTIVITY_TYPE_ID:0,APP_ID:a._appId,ORG_ID:a._orgId,CREATED_BY:a._uId,LAST_UPDATED_BY:a._uId,isGenIds:"Y"}},t.save({method:"update"},datajson,function(r){if("E"===r.status)e.showError(r.title,r.errorMsg);else{r.ids;!function(e,a){var o={ds:"commCommentsRef",operation:"INSERT",data:{ACTIVITY_ID:e.actId,COMMENT:e.comment,APP_ID:e._appId,ORG_ID:e._orgId,IS_CUSTOMER_UPDATE:"N",ATTACHMENT_ID:e._fileId}};t.save({method:"update"},o,function(e){a(e)})}(a,o)}})},this.getComments=function(e,a){var o={ds:"deGetCommentsRefV",executeCountSql:"N",wC:"ACTIVITY_ID = ? and APP_ID = ? and ORG_ID = ?",oB:"CREATION_DATE DESC"};o.params=[e.actId,e._appId,e._orgId],t.query({method:"data"},o,function(e){a(e)})}});var baseUrl=_appUrl+"/api/",importUrl=_appUrl+"/import",exportUrl=_appUrl+"/export/?isTemplate=N",attachUrl=_appUrl+"/aservice";doneServices.factory("ExportService",function(e){return e(exportUrl,{8180:":8180"},{query:{method:"POST",params:{},isArray:!1},save:{method:"POST",params:{},isArray:!1},invoke:{method:"POST",params:{},isArray:!1},saveAll:{method:"POST",params:{},isArray:!0}})}),doneServices.factory("BSService",function(e){return e(baseUrl+":method",{8180:":8180"},{query:{method:"POST",params:{},isArray:!1},save:{method:"POST",params:{},isArray:!1},invoke:{method:"POST",params:{},isArray:!1},saveAll:{method:"POST",params:{},isArray:!0}})}),doneServices.service("AlertService",function(e){this.showError=function(t,a){e.swal({title:t,text:a,type:"warning"})},this.showMessage=function(t,a){e.swal({title:t,text:a,type:"info"})}}),doneServices.service("AppService",function(e,t,e,a){this.getAppConstants=function(o){t.queryResultWithCallback("deAppEnvVarRef","_NOCACHE_","VAR_NAME = ? and APP_ID = ?",[o,a.loggedInUserAppId()],void 0,function(t){if(t&&t.length>0)return t[0].VAR_CODE;e.showError("App Error","No value found for "+o)})},this.getCountries=function(a){t.queryResultWithCallback("DeCountriesRef","_NOCACHE_",void 0,void 0,void 0,function(t){t&&t.length>0?a(t):e.showError("App Error","Error while getting countries list")})},this.getStates=function(a,o,r){t.queryResultWithCallback("DeStatesRef","_NOCACHE_",o,r,void 0,function(t){t&&t.length>0?a(t):e.showError("App Error","Error while getting states list")})},this.getLookupValue=function(e,t){var a=this.getStaticLookups(e);if(a)for(var o=0;o<a.length;o++)if(a[o].id===t)return a[o].value}}),doneServices.service("Cache",function(){var e;this.getRawValue=function(e){return localStorage.getItem(e)},this.init=function(){e||(e=localStorage.getItem("Cache")?angular.fromJson(localStorage.getItem("Cache")):{})},this.get=function(t){return this.init(),e[t]},this.put=function(t,a){return this.init(),e[t]=a,localStorage.setItem("Cache",angular.toJson(e)),e[t]},this.remove=function(t){this.init(),delete e[t],localStorage.setItem("Cache",angular.toJson(e))},this.loggedInUser=function(){return JSON.parse(angular.fromJson(localStorage.$_u))},this.loggedInUserAppId=function(){return this.loggedInUser().appId},this.loggedInRole=function(){return this.loggedInUser().appRoles}});